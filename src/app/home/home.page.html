<ion-header>
  <ion-toolbar color="primary">
    <ion-title>ğŸ“ Live Grammar Checker</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <!-- Info Card -->
  <ion-card class="info-card">
    <ion-card-content>
      <p>âœ¨ Cukup ketik kalimat Bahasa Inggris, akan otomatis dicek setelah Anda berhenti mengetik 1 detik.</p>
    </ion-card-content>
  </ion-card>

  <!-- Textarea Input -->
  <ion-textarea
    [(ngModel)]="userText"
    autoGrow="true"
    placeholder="Type your English sentence here..."
    (ionInput)="onTextChange($event)"
    class="grammar-input"
    rows="5"
    fill="outline"
    label="English sentence"
    labelPlacement="floating">
  </ion-textarea>

  <!-- Loading Indicator -->
  <div *ngIf="isLoading" class="loading-container ion-text-center">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Checking grammar...</p>
  </div>

  <!-- Result Card -->
  <ion-card *ngIf="result && !isLoading" class="result-card" 
            [class.correct]="result.status === 'Correct'"
            [class.incorrect]="result.status === 'Incorrect'">
    <ion-card-header>
      <ion-card-title>
        <ion-chip [color]="result.status === 'Correct' ? 'success' : 'danger'">
          <ion-label>
            {{ result.status === 'Correct' ? 'âœ… Correct' : 'âŒ Incorrect' }}
          </ion-label>
        </ion-chip>
      </ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <div *ngIf="result.status === 'Incorrect'" class="correction-section">
        <p><strong>Suggested correction:</strong></p>
        <div class="corrected-text">{{ result.correction }}</div>
      </div>
      <div *ngIf="result.status === 'Correct'" class="success-message">
        <p>âœ“ Your grammar is correct! Good job! ğŸ‘</p>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Error Message -->
  <ion-card *ngIf="error" color="danger">
    <ion-card-content>
      <ion-icon name="alert-circle"></ion-icon>
      {{ error }}
    </ion-card-content>
  </ion-card>
</ion-content>